
branches:
  only:
  - spencer.infra.pipeline

jobs:
  include:
      - stage: website
      sudo: required
      services:
        - docker
      before_install:
        - cd src/website
        - docker build -t projectgem/website .
      script:
        - docker images
      after_success:
        - if [ "$TRAVIS_BRANCH" == "spencer.infra.pipeline" ]; then docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"; docker push projectgem/website; fi
