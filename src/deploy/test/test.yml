version: '3'
services:
  nginx:
    build: ./nginx
    links:
      - server-1
      - server-2
      - server-3
      - server-4
    ports:
    - "3000:80"
  server-1:
    image: maxgreenwald/projectgem
    expose:
      - "3000"
    environment:
      NODE_ENV: production
  server-2:
    image: maxgreenwald/projectgem
    expose:
      - "3000"
    environment:
      NODE_ENV: production
  server-3:
    image: maxgreenwald/projectgem
    expose:
      - "3000"
    environment:
      NODE_ENV: production
  server-4:
    image: maxgreenwald/projectgem
    expose:
      - "3000"
    environment:
      NODE_ENV: production